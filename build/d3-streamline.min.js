!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-shape")):"function"==typeof define&&define.amd?define(["exports","d3-shape"],e):e(t.d3=t.d3||{},t.d3)}(this,function(t,e){"use strict";function n(){function t(t){var e=r(t);return a.x(function(t){return t.x}).y(function(t){return t.y}).curve(i)(e)}function n(t){var e=f(t.target)-f(t.source),n=o(t.target)-o(t.source),r=Math.atan2(n,e)+Math.PI/2,u=r+.5*Math.PI,a=r+.5*Math.PI;return{x1:o(t.source)+y(t.source)*Math.cos(u),y1:f(t.source)-y(t.source)*Math.sin(u),x2:o(t.target)+y(t.target)*Math.cos(a),y2:f(t.target)-y(t.target)*Math.sin(a)}}function r(t){for(var e=[],r=0,a={};r<t.length;){if(r!==t.length-1){a=n({source:t[r],target:t[r+1]});var o={x:a.x1,y:a.y1},f={x:a.x2,y:a.y2};if(e.push(o,f),e.length>3){var y=e.length-1,i={a:e[y-3],b:e[y-2]},x={a:e[y-1],b:e[y]},c=u(i.a.x,i.a.y,i.b.x,i.b.y,x.a.x,x.a.y,x.b.x,x.b.y);!0===c.found&&(i.b.x=c.x,i.b.y=c.y,x.a.x=c.x,x.a.y=c.y)}}r++}for(r--;r>=0;){if(0!==r){a=n({source:t[r],target:t[r-1]});var o={x:a.x1,y:a.y1},f={x:a.x2,y:a.y2};if(e.push(o,f),e.length>3){var y=e.length-1,i={a:e[y-3],b:e[y-2]},x={a:e[y-1],b:e[y]},c=u(i.a.x,i.a.y,i.b.x,i.b.y,x.a.x,x.a.y,x.b.x,x.b.y);!0===c.found&&(i.b.x=c.x,i.b.y=c.y,x.a.x=c.x,x.a.y=c.y)}}r--}return e}function u(t,e,n,r,u,a,o,f){var y,i,x,c,s,h={x:null,y:null,found:!1};return 0===(y=(f-a)*(n-t)-(o-u)*(r-e))?h:(i=e-a,x=t-u,c=(o-u)*i-(f-a)*x,s=(n-t)*i-(r-e)*x,i=c/y,x=s/y,h.x=t+i*(n-t),h.y=e+i*(r-e),i>0&&i<1&&x>0&&x<1&&(h.found=!0),h)}var a=e.line(),o=function(t){return t.x},f=function(t){return t.y},y=function(t){return t.r},i=e.curveLinearClosed;return t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(f=e,t):f},t.r=function(e){return arguments.length?(y=e,t):y},t.curve=function(e){return arguments.length?(i=e,t):i},t}e="default"in e?e.default:e,t.streamline=n,Object.defineProperty(t,"__esModule",{value:!0})});