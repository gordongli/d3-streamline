!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-shape")):"function"==typeof define&&define.amd?define(["exports","d3-shape"],e):e(t.d3=t.d3||{},t.d3)}(this,function(t,e){"use strict";function n(){function t(t){var e=r(t);return a.x(function(t){return t.x}).y(function(t){return t.y}).curve(x)(e)}function n(t){var e=y(t.target)-y(t.source),n=o(t.target)-o(t.source),r=Math.atan2(n,e)+Math.PI/2,u=r+.5*Math.PI,a=r+.5*Math.PI;return{x1:o(t.source)+f(t.source)*Math.cos(u),y1:y(t.source)-f(t.source)*Math.sin(u),x2:o(t.target)+f(t.target)*Math.cos(a),y2:y(t.target)-f(t.target)*Math.sin(a)}}function r(t){for(var e=[],r=0,a={};r<t.length;){if(r!==t.length-1){a=n({source:t[r],target:t[r+1]});var o={x:a.x1,y:a.y1},y={x:a.x2,y:a.y2};if(e.push(o,y),e.length>3){var f=e.length-1,x={a:e[f-3],b:e[f-2]},i={a:e[f-1],b:e[f]},c=u(x.a.x,x.a.y,x.b.x,x.b.y,i.a.x,i.a.y,i.b.x,i.b.y);!0===c.found&&(x.b.x=c.x,x.b.y=c.y,i.a.x=c.x,i.a.y=c.y)}}r++}for(r--;r>=0;){if(0!==r){a=n({source:t[r],target:t[r-1]});var o={x:a.x1,y:a.y1},y={x:a.x2,y:a.y2};if(e.push(o,y),e.length>3){var f=e.length-1,x={a:e[f-3],b:e[f-2]},i={a:e[f-1],b:e[f]},c=u(x.a.x,x.a.y,x.b.x,x.b.y,i.a.x,i.a.y,i.b.x,i.b.y);!0===c.found&&(x.b.x=c.x,x.b.y=c.y,i.a.x=c.x,i.a.y=c.y)}}r--}return e}function u(t,e,n,r,u,a,o,y){var f,x,i,c,s,h={x:null,y:null,found:!1};return 0===(f=(y-a)*(n-t)-(o-u)*(r-e))?h:(x=e-a,i=t-u,c=(o-u)*x-(y-a)*i,s=(n-t)*x-(r-e)*i,x=c/f,i=s/f,h.x=t+x*(n-t),h.y=e+x*(r-e),x>0&&x<1&&i>0&&i<1&&(h.found=!0),h)}var a=e.line(),o=function(t){return t.x},y=function(t){return t.y},f=function(t){return t.r},x=e.curveLinearClosed;return t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(y=e,t):y},t.r=function(e){return arguments.length?(f=e,t):f},t.curve=function(e){return arguments.length?(x=e,t):x},t}t.streamline=n,Object.defineProperty(t,"__esModule",{value:!0})});